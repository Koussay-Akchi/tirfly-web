{% extends 'base.html.twig' %}

{% block title %}Discussion{% endblock %}

{% block body %}
    <h1>Discussion</h1>

    <div style="border:1px solid #ccc; padding:10px; max-height: 400px; overflow-y: auto;">
        {% for message in messages %}
            <div style="margin-bottom: 10px;">
                <strong>
                    {{ message.expediteur.nom == currentUser.nom ? 'Moi' : message.expediteur.nom }}
                </strong> :
                {{ message.message }}
                <br>
                <small>{{ message.dateMessage|date('d/m/Y H:i') }}</small>
            </div>
        {% else %}
            <p>Aucun message pour le moment.</p>
        {% endfor %}
    </div>

    <form action="{{ path('chat_send', {'id': chat.id}) }}" method="post" style="margin-top: 20px;">
        <textarea name="message" rows="3" style="width: 100%;" placeholder="Votre message..."></textarea><br>
        <button type="submit">Envoyer</button>
    </form>

    <a href="{{ path('chat_index') }}">← Retour à la liste</a>
{% endblock %}
