{% extends 'base.html.twig' %}

{% block title %}Détails de la Destination
{% endblock %}

{% block body %}

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	<div class="container mt-5">
		<h1 class="mb-4">Détails de la Destination</h1>

		<div class="card mb-5">
			<div class="card-body">
				<h3 class="card-title">{{ destination.ville }},
					{{ destination.pays }}</h3>
				<p class="card-text">
					<strong>Climat :</strong>
					{{ climat_names[destination.climat] ?? 'Inconnu' }}</p>
				<p class="card-text">
					<strong>Latitude :</strong>
					{{ destination.latitude }}</p>
				<p class="card-text">
					<strong>Longitude :</strong>
					{{ destination.longitude }}</p>
			</div>
		</div>

		<h2 class="mb-3">Voyages disponibles</h2>

		<div class="table-responsive">
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th>ID</th>
						<th>Nom</th>
						<th>Date Départ</th>
						<th>Date Arrivée</th>
						<th>Prix</th>
						<th>Image</th>
						<th>Détails</th>
					</tr>
				</thead>
				<tbody>
					{% for voyage in voyages %}
						<tr>
							<td>{{ voyage.id }}</td>
							<td>{{ voyage.nom }}</td>
							<td>{{ voyage.dateDepart|date('d/m/Y') }}</td>
							<td>{{ voyage.dateArrive|date('d/m/Y') }}</td>
							<td>{{ voyage.prix }}
								DT</td>
							<td>
								{% if false %}
									<img src="{{ asset('uploads/voyages/' ~ voyage.imageName) }}" alt="Image du voyage" class="table-image" width="100">
								{% else %}
									<img src="{{ asset('images/default.jpg') }}" alt="Image par défaut" class="table-image" width="100">
								{% endif %}
							</td>
							<td class="table-actions">
								<button class="btn btn-success" onclick="window.location.href='{{ path('details_voyage', {'id': voyage.id}) }}'">Details</button>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="7" class="text-center">Aucun voyage trouvé pour cette destination.</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>

		<div class="mt-4">
			<a href="{{ path('liste_destinations') }}" class="btn btn-secondary">← Retour aux destinations</a>
		</div>
	</div>

{% endblock %}
